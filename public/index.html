<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>价格监控图表</title>
    <meta name="x-build-id" content="2025-10-13T15:22:09.874Z">
    <script>
      // 构建版本号用于缓存规避及健康检查
      window.BUILD_ID = "2025-10-13T15:22:09.874Z";
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js?v=2025-10-13T15%3A22%3A09.874Z"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2rem;
        }
        
        .tabs {
            display: flex;
            flex-wrap: wrap;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border: none;
            background: transparent;
            color: #495057;
            font-size: 14px;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab:hover {
            background: #e9ecef;
            color: #007bff;
        }
        
        .tab.active {
            background: white;
            color: #007bff;
            border-bottom-color: #007bff;
            font-weight: 600;
        }
        
        .chart-container {
            padding: 20px;
            position: relative;
            height: 500px;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: #6c757d;
        }
        
        .error {
            text-align: center;
            padding: 50px;
            color: #dc3545;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            padding: 15px 20px;
            background: #f8f9fa;
            border-top: 1px solid #dee2e6;
            font-size: 14px;
            color: #6c757d;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-weight: 600;
            color: #495057;
        }
        
        .table-container {
            padding: 20px;
            background: #f8f9fa;
        }
        
        .table-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #495057;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .data-table th {
            background: #007bff;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        .data-table td {
            padding: 12px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .data-table tr:hover {
            background: #f8f9fa;
        }
        
        .price-link {
            color: #007bff;
            text-decoration: none;
            font-weight: 500;
        }
        
        .price-link:hover {
            text-decoration: underline;
        }
        
        .ratio-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .ratio-low {
            background: #d4edda;
            color: #155724;
        }
        
        .ratio-medium {
            background: #fff3cd;
            color: #856404;
        }
        
        .ratio-high {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>DOTA2 价格监控图表</h1>
        </div>
        
        <div class="tabs" id="tabs">
            <!-- 选项卡将在这里动态生成 -->
        </div>
        
        <div class="chart-container">
            <div class="loading" id="loading">加载中...</div>
            <canvas id="priceChart" style="display: none;"></canvas>
        </div>
        
        <div class="stats" id="stats">
            <!-- 统计信息将在这里显示 -->
        </div>
        
        <div class="table-container">
            <div class="table-title">所有物品价格对比表</div>
            <table class="data-table" id="dataTable">
                <thead>
                    <tr>
                        <th>物品名称</th>
                        <th>Steam 价格</th>
                        <th>Buff 价格</th>
                        <th>比例</th>
                        <th>更新时间</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- 表格数据将在这里动态生成 -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let chart = null;
        let data = [{"id":1,"name":"魔倾天下","buff_link":"https://buff.163.com/goods/3619?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Magus%20Apex","prices":[{"steam_price":28.32,"buff_price":18.78,"buff_username":"深海鱼秒发1","timestamp":"2025-10-13T14:22:45.035Z","ratio":0.7802},{"steam_price":29.53,"buff_price":18.78,"buff_username":"深海鱼秒发1","timestamp":"2025-10-13T14:37:00.654Z","ratio":0.7482},{"steam_price":29.88,"buff_price":18.78,"buff_username":"深海鱼秒发1","timestamp":"2025-10-13T14:44:24.060Z","ratio":0.7394},{"steam_price":28.96,"buff_price":18.78,"buff_username":"深海鱼秒发1","timestamp":"2025-10-13T14:48:49.813Z","ratio":0.7629},{"steam_price":28.96,"buff_price":18.78,"buff_username":"深海鱼秒发1","timestamp":"2025-10-13T14:57:33.027Z","ratio":0.7629}]},{"id":2,"name":"仙德尔莎的复生- 翅膀","buff_link":"https://buff.163.com/goods/961476?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/The%20Resurrection%20of%20Shen%20-%20Wings","prices":[{"steam_price":134.18,"buff_price":97.55,"buff_username":"U16346358015","timestamp":"2025-10-13T14:22:51.226Z","ratio":0.8553},{"steam_price":135.11,"buff_price":97.54,"buff_username":"U02248097007","timestamp":"2025-10-13T14:37:06.164Z","ratio":0.8493},{"steam_price":131.27,"buff_price":97.53,"buff_username":"U16346358015","timestamp":"2025-10-13T14:44:39.594Z","ratio":0.8741},{"steam_price":130.34,"buff_price":97.53,"buff_username":"U16346358015","timestamp":"2025-10-13T14:48:35.891Z","ratio":0.8803},{"steam_price":135.04,"buff_price":97.53,"buff_username":"U16346358015","timestamp":"2025-10-13T14:57:36.541Z","ratio":0.8497},{"steam_price":135.04,"buff_price":97.52,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:19:05.849Z","ratio":0.8496},{"steam_price":135.04,"buff_price":97.52,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:22:25.163Z","ratio":0.8496}]},{"id":3,"name":"无双诡魅","buff_link":"https://buff.163.com/goods/3590?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Manifold%20Paradox","prices":[{"steam_price":174.88,"buff_price":116,"buff_username":"U82876712355","timestamp":"2025-10-13T14:22:56.464Z","ratio":0.7804},{"steam_price":170.61,"buff_price":117.7,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:37:13.001Z","ratio":0.8116},{"steam_price":170.61,"buff_price":117.7,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:44:19.215Z","ratio":0.8116},{"steam_price":170.61,"buff_price":117.2,"buff_username":"U20656507948","timestamp":"2025-10-13T14:48:42.258Z","ratio":0.8082},{"steam_price":170.61,"buff_price":117.2,"buff_username":"U20656507948","timestamp":"2025-10-13T14:57:28.924Z","ratio":0.8082},{"steam_price":170.61,"buff_price":117.19,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:20:06.322Z","ratio":0.8081},{"steam_price":170.61,"buff_price":117.19,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:23:27.141Z","ratio":0.8081}]},{"id":4,"name":"宝蓝幽谷君王","buff_link":"https://buff.163.com/goods/772584?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Monarch%20of%20the%20Sapphire%20Glen","prices":[{"steam_price":39.06,"buff_price":23.89,"buff_username":"U86997064328","timestamp":"2025-10-13T14:23:02.263Z","ratio":0.7196},{"steam_price":38.49,"buff_price":23.89,"buff_username":"U86997064328","timestamp":"2025-10-13T14:37:19.735Z","ratio":0.7302},{"steam_price":34.86,"buff_price":23.89,"buff_username":"U86997064328","timestamp":"2025-10-13T14:44:33.971Z","ratio":0.8063},{"steam_price":34.86,"buff_price":23.89,"buff_username":"U86997064328","timestamp":"2025-10-13T14:48:55.620Z","ratio":0.8063},{"steam_price":34.86,"buff_price":23.79,"buff_username":"热的冒烟","timestamp":"2025-10-13T14:57:39.824Z","ratio":0.8029}]},{"id":5,"name":"扎贡纳斯的献身 - 翅膀","buff_link":"https://buff.163.com/goods/961484?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/The%20Devotions%20of%20Dragonus%20-%20Wings","prices":[{"steam_price":150.9,"buff_price":119.99,"buff_username":"请多关照呀","timestamp":"2025-10-13T14:23:04.953Z","ratio":0.9355},{"steam_price":153.11,"buff_price":120,"buff_username":"U74146467119","timestamp":"2025-10-13T14:37:25.970Z","ratio":0.9221},{"steam_price":152.97,"buff_price":120,"buff_username":"U74146467119","timestamp":"2025-10-13T14:44:44.131Z","ratio":0.9229},{"steam_price":152.97,"buff_price":120,"buff_username":"U74146467119","timestamp":"2025-10-13T14:48:58.671Z","ratio":0.9229},{"steam_price":154.89,"buff_price":120,"buff_username":"U74146467119","timestamp":"2025-10-13T14:57:43.368Z","ratio":0.9115},{"steam_price":154.89,"buff_price":119.99,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:19:11.695Z","ratio":0.9114},{"steam_price":154.89,"buff_price":119.99,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:22:19.116Z","ratio":0.9114}]},{"id":6,"name":"尊享 剑心之遗","buff_link":"https://buff.163.com/goods/14594?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Exalted%20Bladeform%20Legacy","prices":[{"steam_price":219.77,"buff_price":157.47,"buff_username":"U83857284015","timestamp":"2025-10-13T14:23:10.456Z","ratio":0.843},{"steam_price":219.77,"buff_price":157.97,"buff_username":"重氪玩家脱坑","timestamp":"2025-10-13T14:37:31.150Z","ratio":0.8456},{"steam_price":219.77,"buff_price":157.47,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:44:29.597Z","ratio":0.843},{"steam_price":219.77,"buff_price":156.97,"buff_username":"不再流浪","timestamp":"2025-10-13T14:48:45.690Z","ratio":0.8403},{"steam_price":219.63,"buff_price":157.47,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:57:46.520Z","ratio":0.8435}]},{"id":7,"name":"魅影宣告","buff_link":"https://buff.163.com/goods/830646?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Avowance%20of%20the%20Veiled%20Ones","prices":[{"steam_price":266.45,"buff_price":186.59,"buff_username":"宇智波杰瑞","timestamp":"2025-10-13T14:23:15.855Z","ratio":0.8239},{"steam_price":266.45,"buff_price":186.59,"buff_username":"宇智波杰瑞","timestamp":"2025-10-13T14:37:34.218Z","ratio":0.8239},{"steam_price":266.45,"buff_price":186.09,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:44:49.930Z","ratio":0.8217},{"steam_price":266.45,"buff_price":186.09,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:49:01.860Z","ratio":0.8217},{"steam_price":266.45,"buff_price":186.09,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:57:50.703Z","ratio":0.8217}]},{"id":8,"name":"奇门之锋","buff_link":"https://buff.163.com/goods/757883?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Edge%20of%20the%20Lost%20Order","prices":[{"steam_price":9.18,"buff_price":5.79,"buff_username":"森林北","timestamp":"2025-10-13T14:23:19.523Z","ratio":0.742},{"steam_price":9.32,"buff_price":5.78,"buff_username":"秒收秒到账103","timestamp":"2025-10-13T14:38:00.446Z","ratio":0.7296},{"steam_price":8.54,"buff_price":5.8,"buff_username":"森林北","timestamp":"2025-10-13T14:44:55.430Z","ratio":0.799},{"steam_price":8.47,"buff_price":5.79,"buff_username":"U59715793608","timestamp":"2025-10-13T14:49:05.579Z","ratio":0.8042},{"steam_price":9.32,"buff_price":5.78,"buff_username":"U96201819596","timestamp":"2025-10-13T14:57:57.134Z","ratio":0.7296},{"steam_price":8.96,"buff_price":5.78,"buff_username":"U96201819596","timestamp":"2025-10-13T15:20:22.136Z","ratio":0.7589},{"steam_price":8.96,"buff_price":5.5,"buff_username":"seveny","timestamp":"2025-10-13T15:23:24.066Z","ratio":0.7222}]},{"id":9,"name":"泪水之冠","buff_link":"https://buff.163.com/goods/16533?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Crown%20of%20Tears","prices":[{"steam_price":7.97,"buff_price":5.24,"buff_username":"U23021973959","timestamp":"2025-10-13T14:23:22.585Z","ratio":0.7735},{"steam_price":7.97,"buff_price":5.24,"buff_username":"U23021973959","timestamp":"2025-10-13T14:37:55.848Z","ratio":0.7735},{"steam_price":7.97,"buff_price":5.22,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:45:03.993Z","ratio":0.7705},{"steam_price":7.76,"buff_price":5.21,"buff_username":"U78515654353","timestamp":"2025-10-13T14:49:08.809Z","ratio":0.7899},{"steam_price":7.9,"buff_price":5.21,"buff_username":"U78515654353","timestamp":"2025-10-13T14:58:07.653Z","ratio":0.7759},{"steam_price":7.9,"buff_price":5.2,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:20:12.724Z","ratio":0.7744},{"steam_price":7.97,"buff_price":5.2,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:23:36.668Z","ratio":0.7676}]},{"id":10,"name":"尊享 擎天大圣","buff_link":"https://buff.163.com/goods/14581?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Exalted%20Great%20Sage%27s%20Reckoning","prices":[{"steam_price":163.07,"buff_price":119,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:23:26.707Z","ratio":0.8585},{"steam_price":163.07,"buff_price":119,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:37:45.410Z","ratio":0.8585},{"steam_price":163.07,"buff_price":118.5,"buff_username":"重氪玩家脱坑","timestamp":"2025-10-13T14:45:28.523Z","ratio":0.8549},{"steam_price":163.07,"buff_price":118.5,"buff_username":"重氪玩家脱坑","timestamp":"2025-10-13T14:49:36.256Z","ratio":0.8549},{"steam_price":163.07,"buff_price":118.5,"buff_username":"重氪玩家脱坑","timestamp":"2025-10-13T14:58:36.001Z","ratio":0.8549}]},{"id":11,"name":"尊享 千劫神屠","buff_link":"https://buff.163.com/goods/756162?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Exalted%20Feast%20of%20Abscession","prices":[{"steam_price":155.74,"buff_price":110.58,"buff_username":"一支玫瑰花","timestamp":"2025-10-13T14:23:31.929Z","ratio":0.8353},{"steam_price":148.7,"buff_price":110.58,"buff_username":"一支玫瑰花","timestamp":"2025-10-13T14:38:04.862Z","ratio":0.8749},{"steam_price":148.7,"buff_price":110.58,"buff_username":"一支玫瑰花","timestamp":"2025-10-13T14:45:10.150Z","ratio":0.8749},{"steam_price":148.7,"buff_price":110.58,"buff_username":"一支玫瑰花","timestamp":"2025-10-13T14:49:31.548Z","ratio":0.8749},{"steam_price":148.7,"buff_price":110.58,"buff_username":"一支玫瑰花","timestamp":"2025-10-13T14:58:12.076Z","ratio":0.8749}]},{"id":12,"name":"铭刻 黯影臂","buff_link":"https://buff.163.com/goods/9022?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Inscribed%20Arms%20of%20Desolation","prices":[{"steam_price":74.7,"buff_price":53.26,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:23:37.332Z","ratio":0.8388},{"steam_price":69.94,"buff_price":53.26,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:37:49.940Z","ratio":0.8959},{"steam_price":74.78,"buff_price":53.26,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:45:16.230Z","ratio":0.8379},{"steam_price":73.42,"buff_price":53.26,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:49:18.239Z","ratio":0.8534},{"steam_price":73.42,"buff_price":53.26,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:58:17.490Z","ratio":0.8534}]},{"id":13,"name":"嘲讽：恶魔最摇摆！","buff_link":"https://buff.163.com/goods/5?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Taunt%3A%20Fiendish%20Swag%21","prices":[{"steam_price":16.65,"buff_price":12.74,"buff_username":"U01571746766","timestamp":"2025-10-13T14:23:41.318Z","ratio":0.9002},{"steam_price":17.79,"buff_price":12.64,"buff_username":"U39039956181","timestamp":"2025-10-13T14:37:42.516Z","ratio":0.8359},{"steam_price":18.14,"buff_price":12.64,"buff_username":"U39039956181","timestamp":"2025-10-13T14:45:01.144Z","ratio":0.8198},{"steam_price":18.14,"buff_price":12.64,"buff_username":"U39039956181","timestamp":"2025-10-13T14:49:24.063Z","ratio":0.8198},{"steam_price":18.14,"buff_price":12.64,"buff_username":"U39039956181","timestamp":"2025-10-13T14:58:03.268Z","ratio":0.8198}]},{"id":14,"name":"千劫神钩","buff_link":"https://buff.163.com/goods/780085?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/The%20Abscesserator","prices":[{"steam_price":38.56,"buff_price":24.5,"buff_username":"Rich秒发","timestamp":"2025-10-13T14:23:44.263Z","ratio":0.7475},{"steam_price":38.56,"buff_price":24.6,"buff_username":"U60516101618","timestamp":"2025-10-13T14:37:38.337Z","ratio":0.7505},{"steam_price":38.42,"buff_price":24.6,"buff_username":"U60516101618","timestamp":"2025-10-13T14:45:19.554Z","ratio":0.7533},{"steam_price":38.49,"buff_price":24.6,"buff_username":"U60516101618","timestamp":"2025-10-13T14:49:14.629Z","ratio":0.7519},{"steam_price":38.49,"buff_price":24.6,"buff_username":"U60516101618","timestamp":"2025-10-13T14:58:23.555Z","ratio":0.7519},{"steam_price":34.93,"buff_price":24.5,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:19:41.408Z","ratio":0.8252},{"steam_price":33.01,"buff_price":24.5,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:22:51.742Z","ratio":0.8732}]},{"id":15,"name":"光穴战腕","buff_link":"https://buff.163.com/goods/22889?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Bracers%20of%20the%20Cavern%20Luminar","prices":[{"steam_price":33.23,"buff_price":21.7,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:23:48.285Z","ratio":0.7683},{"steam_price":33.23,"buff_price":21.7,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:38:10.953Z","ratio":0.7683},{"steam_price":33.87,"buff_price":21.5,"buff_username":"U78515654353","timestamp":"2025-10-13T14:45:22.675Z","ratio":0.7468},{"steam_price":33.87,"buff_price":21.5,"buff_username":"U78515654353","timestamp":"2025-10-13T14:49:28.105Z","ratio":0.7468},{"steam_price":32.51,"buff_price":21.5,"buff_username":"U78515654353","timestamp":"2025-10-13T14:58:29.443Z","ratio":0.778},{"steam_price":33.87,"buff_price":21.39,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:19:47.596Z","ratio":0.743},{"steam_price":33.87,"buff_price":21.39,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:23:01.376Z","ratio":0.743}]},{"id":16,"name":"千劫神屠 - 背部","buff_link":"https://buff.163.com/goods/965545?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Feast%20of%20Abscession%20-%20Back","prices":[{"steam_price":7.33,"buff_price":4.76,"buff_username":"U65768194475","timestamp":"2025-10-13T14:23:51.902Z","ratio":0.764},{"steam_price":7.68,"buff_price":4.76,"buff_username":"U65768194475","timestamp":"2025-10-13T14:38:16.554Z","ratio":0.7292},{"steam_price":7.68,"buff_price":4.76,"buff_username":"U65768194475","timestamp":"2025-10-13T14:45:35.321Z","ratio":0.7292},{"steam_price":7.54,"buff_price":4.76,"buff_username":"U65768194475","timestamp":"2025-10-13T14:49:51.151Z","ratio":0.7427},{"steam_price":7.33,"buff_price":5.52,"buff_username":"U38766238084","timestamp":"2025-10-13T14:58:47.247Z","ratio":0.886}]},{"id":17,"name":"幻影协律","buff_link":"https://buff.163.com/goods/2916?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Phantom%20Concord","prices":[{"steam_price":7.97,"buff_price":4.85,"buff_username":"森林北","timestamp":"2025-10-13T14:23:57.582Z","ratio":0.7159},{"steam_price":8.61,"buff_price":4.85,"buff_username":"森林北","timestamp":"2025-10-13T14:38:25.464Z","ratio":0.6627},{"steam_price":8.47,"buff_price":4.85,"buff_username":"森林北","timestamp":"2025-10-13T14:45:46.152Z","ratio":0.6737},{"steam_price":8.47,"buff_price":4.85,"buff_username":"森林北","timestamp":"2025-10-13T14:50:08.750Z","ratio":0.6737},{"steam_price":8.32,"buff_price":4.85,"buff_username":"森林北","timestamp":"2025-10-13T14:59:08.631Z","ratio":0.6858},{"steam_price":8.32,"buff_price":4.9,"buff_username":"U49853657682","timestamp":"2025-10-13T15:20:29.157Z","ratio":0.6929},{"steam_price":8.32,"buff_price":5,"buff_username":"Nifty","timestamp":"2025-10-13T15:23:20.721Z","ratio":0.707}]},{"id":18,"name":"魔方之谜","buff_link":"https://buff.163.com/goods/759919?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Crux%20of%20Perplex","prices":[{"steam_price":38.99,"buff_price":24.24,"buff_username":"yinbing","timestamp":"2025-10-13T14:24:01.365Z","ratio":0.7314},{"steam_price":39.06,"buff_price":24.24,"buff_username":"yinbing","timestamp":"2025-10-13T14:38:39.888Z","ratio":0.7301},{"steam_price":39.06,"buff_price":24.14,"buff_username":"U20656507948","timestamp":"2025-10-13T14:46:01.650Z","ratio":0.7271},{"steam_price":39.06,"buff_price":24.14,"buff_username":"U20656507948","timestamp":"2025-10-13T14:50:11.653Z","ratio":0.7271},{"steam_price":39.06,"buff_price":24.14,"buff_username":"U20656507948","timestamp":"2025-10-13T14:59:11.546Z","ratio":0.7271}]},{"id":19,"name":"魔逆之角","buff_link":"https://buff.163.com/goods/771104?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Horns%20of%20the%20Betrayer","prices":[{"steam_price":8.75,"buff_price":5.88,"buff_username":"U46310992126","timestamp":"2025-10-13T14:24:05.530Z","ratio":0.7906},{"steam_price":8.75,"buff_price":5.88,"buff_username":"U39039956181","timestamp":"2025-10-13T14:38:34.037Z","ratio":0.7906},{"steam_price":8.75,"buff_price":5.87,"buff_username":"U01571746766","timestamp":"2025-10-13T14:45:53.599Z","ratio":0.7892},{"steam_price":8.75,"buff_price":5.87,"buff_username":"U01571746766","timestamp":"2025-10-13T14:49:42.857Z","ratio":0.7892},{"steam_price":8.75,"buff_price":5.87,"buff_username":"U01571746766","timestamp":"2025-10-13T14:58:40.480Z","ratio":0.7892}]},{"id":20,"name":"嘲讽：下地狱再上来！","buff_link":"https://buff.163.com/goods/1287?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Taunt%3A%20To%20Hell%20and%20Back%21","prices":[{"steam_price":14.23,"buff_price":10.23,"buff_username":"机器人24h极速","timestamp":"2025-10-13T14:24:10.843Z","ratio":0.8458},{"steam_price":14.23,"buff_price":10.23,"buff_username":"机器人24h极速","timestamp":"2025-10-13T14:38:43.624Z","ratio":0.8458},{"steam_price":14.37,"buff_price":10.13,"buff_username":"U78515654353","timestamp":"2025-10-13T14:46:07.671Z","ratio":0.8293},{"steam_price":14.37,"buff_price":10.13,"buff_username":"U78515654353","timestamp":"2025-10-13T14:50:05.555Z","ratio":0.8293},{"steam_price":13.59,"buff_price":10.13,"buff_username":"U78515654353","timestamp":"2025-10-13T14:59:02.712Z","ratio":0.8769}]},{"id":21,"name":"天外裁决","buff_link":"https://buff.163.com/goods/770338?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Judgement%20of%20the%20Fallen","prices":[{"steam_price":6.19,"buff_price":3.8,"buff_username":"U65768194475","timestamp":"2025-10-13T14:24:15.059Z","ratio":0.7222},{"steam_price":6.33,"buff_price":3.78,"buff_username":"U39039956181","timestamp":"2025-10-13T14:38:19.779Z","ratio":0.7025},{"steam_price":6.33,"buff_price":3.76,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:45:39.775Z","ratio":0.6988},{"steam_price":6.05,"buff_price":3.78,"buff_username":"U39039956181","timestamp":"2025-10-13T14:49:46.721Z","ratio":0.7351},{"steam_price":6.33,"buff_price":3.78,"buff_username":"U39039956181","timestamp":"2025-10-13T14:58:43.801Z","ratio":0.7025},{"steam_price":6.33,"buff_price":3.76,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:19:27.700Z","ratio":0.6988},{"steam_price":6.33,"buff_price":3.76,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:22:55.431Z","ratio":0.6988}]},{"id":22,"name":"锤公震","buff_link":"https://buff.163.com/goods/2108?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Shock%20of%20the%20Anvil","prices":[{"steam_price":29.74,"buff_price":18.98,"buff_username":"U16346358015","timestamp":"2025-10-13T14:24:20.726Z","ratio":0.7508},{"steam_price":29.74,"buff_price":18.98,"buff_username":"U16346358015","timestamp":"2025-10-13T14:38:31.122Z","ratio":0.7508},{"steam_price":28.81,"buff_price":18.98,"buff_username":"U16346358015","timestamp":"2025-10-13T14:45:50.725Z","ratio":0.7751},{"steam_price":28.81,"buff_price":18.98,"buff_username":"U16346358015","timestamp":"2025-10-13T14:49:57.044Z","ratio":0.7751},{"steam_price":29.6,"buff_price":18.98,"buff_username":"U16346358015","timestamp":"2025-10-13T14:58:52.486Z","ratio":0.7544}]},{"id":23,"name":"魔倾乾坤","buff_link":"https://buff.163.com/goods/3630?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Magus%20Accord","prices":[{"steam_price":148.13,"buff_price":96.6,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:24:23.560Z","ratio":0.7672},{"steam_price":147.84,"buff_price":96.6,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:38:36.989Z","ratio":0.7687},{"steam_price":147.84,"buff_price":96.6,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:45:57.055Z","ratio":0.7687},{"steam_price":148.13,"buff_price":96.6,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:50:01.291Z","ratio":0.7672},{"steam_price":148.13,"buff_price":96.6,"buff_username":"您发报价三分到","timestamp":"2025-10-13T14:58:56.437Z","ratio":0.7672}]},{"id":24,"name":"天洪先锋","buff_link":"https://buff.163.com/goods/771737?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/First%20of%20the%20Flood","prices":[{"steam_price":5.34,"buff_price":3.53,"buff_username":"U04298424433","timestamp":"2025-10-13T14:24:26.868Z","ratio":0.7777},{"steam_price":5.26,"buff_price":3.53,"buff_username":"U04298424433","timestamp":"2025-10-13T14:39:07.087Z","ratio":0.7895},{"steam_price":5.26,"buff_price":3.52,"buff_username":"U01571746766","timestamp":"2025-10-13T14:46:12.355Z","ratio":0.7873},{"steam_price":5.26,"buff_price":3.52,"buff_username":"U01571746766","timestamp":"2025-10-13T14:50:34.393Z","ratio":0.7873},{"steam_price":5.41,"buff_price":3.51,"buff_username":"比达胡话","timestamp":"2025-10-13T14:59:29.300Z","ratio":0.7633}]},{"id":25,"name":"幽魂之缚","buff_link":"https://buff.163.com/goods/772582?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Wraithbinder","prices":[{"steam_price":8.25,"buff_price":4.69,"buff_username":"对玛导致昏","timestamp":"2025-10-13T14:24:30.176Z","ratio":0.6688},{"steam_price":8.32,"buff_price":4.69,"buff_username":"对玛导致昏","timestamp":"2025-10-13T14:39:12.583Z","ratio":0.6632},{"steam_price":8.32,"buff_price":4.69,"buff_username":"对玛导致昏","timestamp":"2025-10-13T14:46:16.785Z","ratio":0.6632},{"steam_price":8.32,"buff_price":4.69,"buff_username":"对玛导致昏","timestamp":"2025-10-13T14:50:30.716Z","ratio":0.6632},{"steam_price":8.32,"buff_price":4.69,"buff_username":"对玛导致昏","timestamp":"2025-10-13T14:59:17.205Z","ratio":0.6632}]},{"id":26,"name":"影龙之歌 - 头部","buff_link":"https://buff.163.com/goods/956889?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Song%20of%20the%20Shadow%20Dragon%20-%20Head","prices":[{"steam_price":26.25,"buff_price":16.06,"buff_username":"基纽特战队六号","timestamp":"2025-10-13T14:24:33.935Z","ratio":0.7198},{"steam_price":25.54,"buff_price":15.96,"buff_username":"U61128725880","timestamp":"2025-10-13T14:39:01.578Z","ratio":0.7352},{"steam_price":25.54,"buff_price":15.96,"buff_username":"U61128725880","timestamp":"2025-10-13T14:46:21.239Z","ratio":0.7352},{"steam_price":25.54,"buff_price":15.96,"buff_username":"U61128725880","timestamp":"2025-10-13T14:50:46.564Z","ratio":0.7352},{"steam_price":26.25,"buff_price":15.96,"buff_username":"U61128725880","timestamp":"2025-10-13T14:59:39.335Z","ratio":0.7153}]},{"id":27,"name":"横裂之魄","buff_link":"https://buff.163.com/goods/28978?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Transversant%20Soul","prices":[{"steam_price":11.53,"buff_price":7.86,"buff_username":"天才少年火火","timestamp":"2025-10-13T14:24:37.263Z","ratio":0.802},{"steam_price":11.53,"buff_price":7.89,"buff_username":"U63002803115","timestamp":"2025-10-13T14:38:55.179Z","ratio":0.8051},{"steam_price":11.53,"buff_price":7.89,"buff_username":"乌桃厚乳奶绿","timestamp":"2025-10-13T14:46:26.781Z","ratio":0.8051},{"steam_price":11.53,"buff_price":7.89,"buff_username":"乌桃厚乳奶绿","timestamp":"2025-10-13T14:50:18.067Z","ratio":0.8051},{"steam_price":11.53,"buff_price":7.89,"buff_username":"乌桃厚乳奶绿","timestamp":"2025-10-13T14:59:24.510Z","ratio":0.8051},{"steam_price":11.03,"buff_price":7.87,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:20:25.146Z","ratio":0.8394},{"steam_price":11.03,"buff_price":7.87,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:23:33.320Z","ratio":0.8394}]},{"id":28,"name":"北辰灭世","buff_link":"https://buff.163.com/goods/781389?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Dipper%20the%20Destroyer","prices":[{"steam_price":36.85,"buff_price":23.59,"buff_username":"U69073466077","timestamp":"2025-10-13T14:24:43.392Z","ratio":0.7531},{"steam_price":38.85,"buff_price":23.59,"buff_username":"U69073466077","timestamp":"2025-10-13T14:39:19.900Z","ratio":0.7144},{"steam_price":38.85,"buff_price":23.49,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:46:32.118Z","ratio":0.7113},{"steam_price":38.85,"buff_price":23.49,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:50:40.059Z","ratio":0.7113},{"steam_price":38.85,"buff_price":23.49,"buff_username":"周跳跳神秘商店","timestamp":"2025-10-13T14:59:45.030Z","ratio":0.7113},{"steam_price":38.85,"buff_price":24.96,"buff_username":"yinbing","timestamp":"2025-10-13T15:20:38.368Z","ratio":0.7558},{"steam_price":38.78,"buff_price":24.96,"buff_username":"yinbing","timestamp":"2025-10-13T15:23:48.666Z","ratio":0.7572}]},{"id":29,"name":"血羽宴觞","buff_link":"https://buff.163.com/goods/759063?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Bloodfeather%20Feast","prices":[{"steam_price":7.76,"buff_price":5.04,"buff_username":"U20119903969","timestamp":"2025-10-13T14:24:46.861Z","ratio":0.7641},{"steam_price":7.19,"buff_price":5.05,"buff_username":"叁分钟秒发货","timestamp":"2025-10-13T14:38:49.128Z","ratio":0.8263},{"steam_price":7.76,"buff_price":5.03,"buff_username":"U20656507948","timestamp":"2025-10-13T14:46:38.729Z","ratio":0.7626},{"steam_price":7.76,"buff_price":5.03,"buff_username":"U20656507948","timestamp":"2025-10-13T14:50:27.409Z","ratio":0.7626},{"steam_price":7.61,"buff_price":5.03,"buff_username":"叁分钟秒发货","timestamp":"2025-10-13T14:59:35.452Z","ratio":0.7776},{"steam_price":7.11,"buff_price":5.01,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:21:05.305Z","ratio":0.829},{"steam_price":8.18,"buff_price":5.01,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:24:07.158Z","ratio":0.7206}]},{"id":30,"name":"疾隼之翔","buff_link":"https://buff.163.com/goods/2923?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Peregrine%20Flight","prices":[{"steam_price":12.1,"buff_price":10.52,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:24:51.463Z","ratio":1.0228},{"steam_price":16.01,"buff_price":10.52,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:39:16.584Z","ratio":0.773},{"steam_price":15.79,"buff_price":10.52,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:46:44.004Z","ratio":0.7838},{"steam_price":15.79,"buff_price":10.52,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:50:24.153Z","ratio":0.7838},{"steam_price":16.01,"buff_price":10.52,"buff_username":"IGG机器人秒发","timestamp":"2025-10-13T14:59:20.993Z","ratio":0.773}]},{"id":31,"name":"铭刻 铁龙血脉","buff_link":"https://buff.163.com/goods/6613?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Inscribed%20Kindred%20of%20the%20Iron%20Dragon","prices":[{"steam_price":7.97,"buff_price":5.54,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:19:01.927Z","ratio":0.8178},{"steam_price":7.97,"buff_price":5.54,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:22:33.767Z","ratio":0.8178}]},{"id":32,"name":"铭刻 战鬼双刃","buff_link":"https://buff.163.com/goods/8673?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Inscribed%20Blades%20of%20Voth%20Domosh","prices":[{"steam_price":200.21,"buff_price":136.99,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:19:18.632Z","ratio":0.805},{"steam_price":200.21,"buff_price":136.99,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:22:29.560Z","ratio":0.805}]},{"id":33,"name":"节庆豪礼","buff_link":"https://buff.163.com/goods/953522?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Lumpo%20and%20Rupertus","prices":[{"steam_price":227.81,"buff_price":166.45,"buff_username":"秒收老板发财8","timestamp":"2025-10-13T15:19:23.497Z","ratio":0.8596},{"steam_price":227.81,"buff_price":166.45,"buff_username":"秒收老板发财8","timestamp":"2025-10-13T15:22:38.019Z","ratio":0.8596}]},{"id":34,"name":"石爪清道夫天辉防御塔","buff_link":"https://buff.163.com/goods/904995?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Stoneclaw%20Scavengers%20Radiant%20Towers","prices":[{"steam_price":10.81,"buff_price":6.74,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:19:31.976Z","ratio":0.7335},{"steam_price":10.81,"buff_price":6.74,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:22:48.911Z","ratio":0.7335}]},{"id":35,"name":"铭刻 噬魔之王","buff_link":"https://buff.163.com/goods/7903?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Inscribed%20Demon%20Eater","prices":[{"steam_price":191.1,"buff_price":132.3,"buff_username":"您发报价三分到","timestamp":"2025-10-13T15:19:36.181Z","ratio":0.8145},{"steam_price":191.1,"buff_price":132.3,"buff_username":"您发报价三分到","timestamp":"2025-10-13T15:22:43.208Z","ratio":0.8145}]},{"id":36,"name":"嘲讽：图腾滚动","buff_link":"https://buff.163.com/goods/780052?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Taunt%3A%20Totem%20Roller","prices":[{"steam_price":22.27,"buff_price":14.86,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:19:50.578Z","ratio":0.785},{"steam_price":21.7,"buff_price":14.86,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:23:04.783Z","ratio":0.8056}]},{"id":37,"name":"支配协律","buff_link":"https://buff.163.com/goods/29041?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Concord%20Dominion","prices":[{"steam_price":66.24,"buff_price":41.4,"buff_username":"U26865495576","timestamp":"2025-10-13T15:19:56.808Z","ratio":0.7353},{"steam_price":66.24,"buff_price":41.4,"buff_username":"U26865495576","timestamp":"2025-10-13T15:23:15.396Z","ratio":0.7353}]},{"id":38,"name":"剑心之遗","buff_link":"https://buff.163.com/goods/768151?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Bladeform%20Legacy","prices":[{"steam_price":207.11,"buff_price":158.99,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:20:02.313Z","ratio":0.9031},{"steam_price":240.55,"buff_price":158.99,"buff_username":"请多关照呀","timestamp":"2025-10-13T15:23:09.254Z","ratio":0.7776}]},{"id":39,"name":"石爪清道夫夜魇防御塔","buff_link":"https://buff.163.com/goods/904990?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Stoneclaw%20Scavengers%20Dire%20Towers","prices":[{"steam_price":9.6,"buff_price":6.27,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:20:16.239Z","ratio":0.7684},{"steam_price":9.6,"buff_price":6.27,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:23:44.861Z","ratio":0.7684}]},{"id":40,"name":"萨瑞丹之琴","buff_link":"https://buff.163.com/goods/905062?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/The%20Strings%20of%20Suradan","prices":[{"steam_price":37.92,"buff_price":25.9,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:20:34.998Z","ratio":0.8035},{"steam_price":37.99,"buff_price":25.9,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:23:41.206Z","ratio":0.8021}]},{"id":41,"name":"倾天之战 - 天辉小兵","buff_link":"https://buff.163.com/goods/961493?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Crownfall%20-%20Radiant%20Creeps","prices":[{"steam_price":6.12,"buff_price":4.02,"buff_username":"CowboY","timestamp":"2025-10-13T15:20:43.917Z","ratio":0.7728},{"steam_price":6.12,"buff_price":4.02,"buff_username":"CowboY","timestamp":"2025-10-13T15:23:57.059Z","ratio":0.7728}]},{"id":42,"name":"烬爵披肩","buff_link":"https://buff.163.com/goods/3556?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Mantle%20of%20the%20Cinder%20Baron","prices":[{"steam_price":20.77,"buff_price":15.18,"buff_username":"MushroomK","timestamp":"2025-10-13T15:20:49.443Z","ratio":0.8598},{"steam_price":20.78,"buff_price":15.18,"buff_username":"MushroomK","timestamp":"2025-10-13T15:23:52.880Z","ratio":0.8594}]},{"id":43,"name":"珠辉旋刃","buff_link":"https://buff.163.com/goods/759914?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Glaive%20of%20Oscilla","prices":[{"steam_price":36.07,"buff_price":24.1,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:20:53.685Z","ratio":0.7861},{"steam_price":36.29,"buff_price":24.1,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:24:10.572Z","ratio":0.7813}]},{"id":44,"name":"懊怆魔镰","buff_link":"https://buff.163.com/goods/771732?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Scythes%20of%20Sorrow","prices":[{"steam_price":6.55,"buff_price":3.68,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:20:59.965Z","ratio":0.661},{"steam_price":6.62,"buff_price":3.68,"buff_username":"小小叮噹","timestamp":"2025-10-13T15:24:17.681Z","ratio":0.654}]},{"id":45,"name":"斩巫碎颅锤","buff_link":"https://buff.163.com/goods/23774?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Basher%20of%20Mage%20Skulls","prices":[{"steam_price":12.74,"buff_price":8.35,"buff_username":"情亦聪聪","timestamp":"2025-10-13T15:21:09.501Z","ratio":0.7711},{"steam_price":12.74,"buff_price":8.35,"buff_username":"情亦聪聪","timestamp":"2025-10-13T15:24:02.309Z","ratio":0.7711}]},{"id":46,"name":"共鸣心焦","buff_link":"https://buff.163.com/goods/14344?from=market#tab=selling","link":"https://steamcommunity.com/market/listings/570/Focal%20Resonance","prices":[{"steam_price":44.68,"buff_price":32.53,"buff_username":"U03411873504","timestamp":"2025-10-13T15:21:12.537Z","ratio":0.8565},{"steam_price":44.68,"buff_price":32.53,"buff_username":"U03411873504","timestamp":"2025-10-13T15:24:14.516Z","ratio":0.8565}]}];
        
        // 初始化页面
        function initializePage() {
            initializeTabs();
            initializeTable();
            showLoading(false);
            if (data.length > 0) {
                switchToItem(0);
            }
        }
        
        // 初始化选项卡
        function initializeTabs() {
            const tabsContainer = document.getElementById('tabs');
            const statsContainer = document.getElementById('stats');
            
            // 生成选项卡
            data.forEach((item, index) => {
                const tab = document.createElement('button');
                tab.className = 'tab';
                tab.textContent = item.name;
                tab.onclick = () => switchToItem(index);
                tabsContainer.appendChild(tab);
            });
            
            // 显示统计信息
            const totalItems = data.length;
            const totalPrices = data.reduce((sum, item) => sum + item.prices.length, 0);
            const avgPrices = data.reduce((sum, item) => sum + item.prices.length, 0) / data.length;
            
            statsContainer.innerHTML = `
                <div class="stat-item">
                    <div class="stat-value">${totalItems}</div>
                    <div>物品数量</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${totalPrices}</div>
                    <div>价格记录</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${avgPrices.toFixed(1)}</div>
                    <div>平均记录数</div>
                </div>
            `;
        }
        
        // 初始化表格
        function initializeTable() {
            const tableBody = document.getElementById('tableBody');
            
            // 获取每个物品的最新数据并排序
            const sortedData = data.map(item => {
                const latestPrice = item.prices[item.prices.length - 1];
                return {
                    ...item,
                    latestPrice: latestPrice
                };
            }).sort((a, b) => a.latestPrice.ratio - b.latestPrice.ratio);
            
            // 生成表格行
            tableBody.innerHTML = sortedData.map(item => {
                const latestPrice = item.latestPrice;
                const ratio = latestPrice.ratio;
                const ratioClass = ratio < 0.75 ? 'ratio-low' : ratio < 0.85 ? 'ratio-medium' : 'ratio-high';
                const updateTime = new Date(latestPrice.timestamp).toLocaleString('zh-CN');
                
                return `
                    <tr>
                        <td>${item.name}</td>
                        <td>
                            <a href="${item.link}" target="_blank" class="price-link">
                                ¥${latestPrice.steam_price}
                            </a>
                        </td>
                        <td>
                            <a href="${item.buff_link}" target="_blank" class="price-link">
                                ¥${latestPrice.buff_price}
                            </a>
                        </td>
                        <td>
                            <span class="ratio-badge ${ratioClass}">${ratio.toFixed(3)}</span>
                        </td>
                        <td>${updateTime}</td>
                    </tr>
                `;
            }).join('');
        }
        
        // 切换到指定物品
        function switchToItem(index) {
            // 更新选项卡状态
            document.querySelectorAll('.tab').forEach((tab, i) => {
                tab.classList.toggle('active', i === index);
            });
            
            // 显示图表
            showLoading(false);
            createChart(data[index]);
        }
        
        // 创建图表
        function createChart(item) {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            // 销毁现有图表
            if (chart) {
                chart.destroy();
            }
            
            // 准备数据
            const labels = item.prices.map(price => {
                const date = new Date(price.timestamp);
                return date.toLocaleString('zh-CN', {
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            });
            
            const steamPrices = item.prices.map(price => price.steam_price);
            const buffPrices = item.prices.map(price => price.buff_price);
            const ratios = item.prices.map(price => price.ratio);
            
            // 创建图表
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Steam 价格',
                            data: steamPrices,
                            borderColor: '#007bff',
                            backgroundColor: 'rgba(0, 123, 255, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4
                        },
                        {
                            label: 'Buff 价格',
                            data: buffPrices,
                            borderColor: '#28a745',
                            backgroundColor: 'rgba(40, 167, 69, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: item.name,
                            font: {
                                size: 18,
                                weight: 'bold'
                            }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    const index = context.dataIndex;
                                    const ratio = ratios[index];
                                    const timestamp = item.prices[index].timestamp;
                                    const date = new Date(timestamp).toLocaleString('zh-CN');
                                    
                                    return [
                                        `比例: ${ratio.toFixed(3)}`,
                                        `时间: ${date}`
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: '时间'
                            }
                        },
                        y: {
                            display: true,
                            title: {
                                display: true,
                                text: '价格 (¥)'
                            },
                            beginAtZero: false
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }
        
        // 显示/隐藏加载状态
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
            document.getElementById('priceChart').style.display = show ? 'none' : 'block';
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>